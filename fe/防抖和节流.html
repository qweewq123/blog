<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>防抖和节流 | wdss博客</title>
    <meta name="description" content="wdss blog">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.6bab5824.css" as="style"><link rel="preload" href="/blog/assets/js/app.0b22cf3f.js" as="script"><link rel="preload" href="/blog/assets/js/6.064584df.js" as="script"><link rel="prefetch" href="/blog/assets/js/12.cc90a479.js"><link rel="prefetch" href="/blog/assets/js/1.ec15e0b3.js"><link rel="prefetch" href="/blog/assets/js/2.9ece1dea.js"><link rel="prefetch" href="/blog/assets/js/3.6dcd48ec.js"><link rel="prefetch" href="/blog/assets/js/4.b3873ad8.js"><link rel="prefetch" href="/blog/assets/js/5.7db82ded.js"><link rel="prefetch" href="/blog/assets/js/7.c346629c.js"><link rel="prefetch" href="/blog/assets/js/8.57d4a4a8.js"><link rel="prefetch" href="/blog/assets/js/9.852e9c92.js"><link rel="prefetch" href="/blog/assets/js/10.f26f77db.js"><link rel="prefetch" href="/blog/assets/js/11.0b7b7aca.js"><link rel="prefetch" href="/blog/assets/js/13.9f17e5fa.js"><link rel="prefetch" href="/blog/assets/js/14.07ade210.js"><link rel="prefetch" href="/blog/assets/js/15.fcf3bca2.js"><link rel="prefetch" href="/blog/assets/js/16.4e30721f.js"><link rel="prefetch" href="/blog/assets/js/17.b7eb02d4.js"><link rel="prefetch" href="/blog/assets/js/18.d870f2a9.js"><link rel="prefetch" href="/blog/assets/js/19.72945b18.js"><link rel="prefetch" href="/blog/assets/js/20.dbca4cb6.js"><link rel="prefetch" href="/blog/assets/js/21.29dd29a6.js"><link rel="prefetch" href="/blog/assets/js/22.e36b6172.js"><link rel="prefetch" href="/blog/assets/js/23.248d4173.js"><link rel="prefetch" href="/blog/assets/js/24.e01caa54.js"><link rel="prefetch" href="/blog/assets/js/25.3a3e531e.js"><link rel="prefetch" href="/blog/assets/js/26.060cfbab.js"><link rel="prefetch" href="/blog/assets/js/27.75282fdb.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.6bab5824.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/blog/" class="home-link router-link-active"><!----><span class="site-name">
      wdss博客
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/fe/" class="nav-link router-link-active">前端之路</a></div><div class="nav-item"><a href="/blog/ai/" class="nav-link">算法和AI</a></div><div class="nav-item"><a href="/blog/full/" class="nav-link">全栈工程师</a></div><div class="nav-item"><a href="https://qweewq123.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人简历
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/qweewq123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/fe/" class="nav-link router-link-active">前端之路</a></div><div class="nav-item"><a href="/blog/ai/" class="nav-link">算法和AI</a></div><div class="nav-item"><a href="/blog/full/" class="nav-link">全栈工程师</a></div><div class="nav-item"><a href="https://qweewq123.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人简历
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/qweewq123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>html</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/fe/页面重绘和回流以及优化.html" class="sidebar-link">页面重绘和回流以及优化</a></li><li><a href="/blog/fe/如何计算白屏和首屏时间.html" class="sidebar-link">如何计算白屏和首屏时间</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>css</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/fe/flex.html" class="sidebar-link">flex布局</a></li><li><a href="/blog/fe/FC.html" class="sidebar-link">FC(formatting context)</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>js</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/fe/set.html" class="sidebar-link">set</a></li><li><a href="/blog/fe/前端模块化.html" class="sidebar-link">前端模块化</a></li><li><a href="/blog/fe/arguments.html" class="sidebar-link">arguments</a></li><li><a href="/blog/fe/防抖和节流.html" class="active sidebar-link">防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/fe/防抖和节流.html#防抖-debounce" class="sidebar-link">防抖 - debounce</a></li><li class="sidebar-sub-header"><a href="/blog/fe/防抖和节流.html#节流-throttle" class="sidebar-link">节流 - throttle</a></li></ul></li><li><a href="/blog/fe/promise.html" class="sidebar-link">promise的实现</a></li><li><a href="/blog/fe/setTimeout妙用.html" class="sidebar-link">setTimeout妙用</a></li><li><a href="/blog/fe/深入理解javascript中的原型.html" class="sidebar-link">深入理解javascript中的原型</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>vue</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/fe/使用nuxt的ssr渲染.html" class="sidebar-link">使用nuxt的ssr渲染</a></li><li><a href="/blog/fe/vue学习watch的高级用法.html" class="sidebar-link">vue学习watch的高级用法</a></li><li><a href="/blog/fe/渲染函数.html" class="sidebar-link">渲染函数</a></li><li><a href="/blog/fe/vue生命周期.html" class="sidebar-link">vue生命周期</a></li><li><a href="/blog/fe/vue-router.html" class="sidebar-link">vue-router知识</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>其他</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/fe/hack.html" class="sidebar-link">hack</a></li><li><a href="/blog/fe/web安全.html" class="sidebar-link">web安全</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="防抖和节流"><a href="#防抖和节流" aria-hidden="true" class="header-anchor">#</a> 防抖和节流</h1><p>针对一些频繁触发的事件如scroll、resize（具体例子，输入框 or 无限滚动）,这时候应该考虑防抖和节流，不然短时间多次触发事件，十分影响性能。</p><h2 id="防抖-debounce"><a href="#防抖-debounce" aria-hidden="true" class="header-anchor">#</a> 防抖 - debounce</h2><p>防抖：将若干个函数调用合成为一次，并在给定时间过去之后仅被调用一次。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 维护一个 timer，用来记录当前执行函数状态</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过 ‘this’ 和 ‘arguments’ 获取函数的作用域和变量</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token comment">// 清理掉正在执行的函数，并重新执行</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 记录当前函数调用次数</span>
<span class="token comment">// 当用户滚动时被调用的函数</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  flag<span class="token operator">++</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Number of calls: %d'</span><span class="token punctuation">,</span> flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在 debounce 中包装我们的函数，过 2 秒触发一次</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>这里推荐一个js很出名的工具库-lodash,他的核心实现方式：</p><div class="language-js extra-class"><pre class="language-js"><code>        <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            isInvoking <span class="token operator">=</span> <span class="token function">shouldInvoke</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>

        lastArgs <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        lastThis <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        lastCallTime <span class="token operator">=</span> time<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>isInvoking<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>timerId <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">leadingEdge</span><span class="token punctuation">(</span>lastCallTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>maxing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Handle invocations in a tight loop.</span>
            timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>timerExpired<span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">invokeFunc</span><span class="token punctuation">(</span>lastCallTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timerId <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>timerExpired<span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      debounced<span class="token punctuation">.</span>cancel <span class="token operator">=</span> cancel<span class="token punctuation">;</span>
      debounced<span class="token punctuation">.</span>flush <span class="token operator">=</span> flush<span class="token punctuation">;</span>
      <span class="token keyword">return</span> debounced<span class="token punctuation">;</span>
</code></pre></div><h2 id="节流-throttle"><a href="#节流-throttle" aria-hidden="true" class="header-anchor">#</a> 节流 - throttle</h2><p>节流是比防抖宽松一点的处理方式，可以看成允许一个函数在规定的时间内只执行一次。
它和防抖动最大的区别就是，节流函数不管事件触发有多频繁，都会保证在规定时间内一定会执行一次真正的事件处理函数。</p><p>比如在页面的无限加载场景下，我们需要用户在滚动页面时，每隔一段时间发一次 Ajax 请求，而不是在用户停下滚动页面操作时才去请求数据。这样的场景，就适合用节流阀技术来实现。
主要有两种实现方法：</p><ul><li>时间戳</li><li>定时器</li></ul><p>时间戳实现：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span>delay<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">var</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>now<span class="token operator">-</span>prev<span class="token operator">&gt;=</span>delay<span class="token punctuation">)</span><span class="token punctuation">{</span>
            func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>定时器实现:</p><div class="language-js extra-class"><pre class="language-js"><code>fucntion <span class="token function">throttle</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token function">funtion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> args    <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>综合使用时间戳与定时器，完成一个事件触发时立即执行，触发完毕还能执行一次的节流函数</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span>delay<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> curTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> remaining <span class="token operator">=</span> delay<span class="token operator">-</span><span class="token punctuation">(</span>curTime<span class="token operator">-</span>startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>remaining<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span>remaining<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>loadsh实现为:</p><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">var</span> leading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    trailing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> func <span class="token operator">!=</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token constant">FUNC_ERROR_TEXT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        leading <span class="token operator">=</span> <span class="token string">'leading'</span> <span class="token keyword">in</span> options <span class="token operator">?</span> <span class="token operator">!</span><span class="token operator">!</span>options<span class="token punctuation">.</span>leading <span class="token punctuation">:</span> leading<span class="token punctuation">;</span>
        trailing <span class="token operator">=</span> <span class="token string">'trailing'</span> <span class="token keyword">in</span> options <span class="token operator">?</span> <span class="token operator">!</span><span class="token operator">!</span>options<span class="token punctuation">.</span>trailing <span class="token punctuation">:</span> trailing<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token function">debounce</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string">'leading'</span><span class="token punctuation">:</span> leading<span class="token punctuation">,</span>
        <span class="token string">'maxWait'</span><span class="token punctuation">:</span> wait<span class="token punctuation">,</span>
        <span class="token string">'trailing'</span><span class="token punctuation">:</span> trailing
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>所以可以看出么，防抖和节流实现方式差不多，差的是思想。</p><ul><li>防抖：将几次操作合并为一此操作进行。原理是维护一个计时器，规定在delay时间后触发函数，但是在delay时间内再次触发的话，就会取消之前的计时器而重新设置。这样一来，只有最后一次操作能被触发。</li><li>节流：使得一定时间内只触发一次函数。
它和防抖动最大的区别就是，节流函数不管事件触发有多频繁，都会保证在规定时间内一定会执行一次真正的事件处理函数，而防抖动只是在最后一次事件后才触发一次函数。
原理是通过判断是否到达一定时间来触发函数，若没到规定时间则使用计时器延后，而下一次事件则会重新设定计时器。</li></ul></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/blog/assets/js/6.064584df.js" defer></script><script src="/blog/assets/js/app.0b22cf3f.js" defer></script>
  </body>
</html>
